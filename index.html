<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>자아효능감 검사</title>
  <style>
    body { font-family: 'Pretendard', sans-serif; background-color: #f8f9fa; margin: 0; padding: 0; }
    header { background-color: #4c6ef5; color: white; padding: 1.5rem; text-align: center; font-size: 1.5rem; }
    .definition { text-align: center; margin-top: -1.5rem; font-size: 0.95rem; color: #495057; }
    .container { max-width: 600px; margin: 2rem auto; background: white; padding: 2rem; border-radius: 16px; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05); }
    .question { margin-bottom: 1.5rem; }
    .question h3 { font-size: 1rem; margin-bottom: 0.5rem; }
    .options label { display: block; margin-bottom: 0.5rem; cursor: pointer; }
    button { display: block; margin: 2rem auto 0; padding: 0.75rem 2rem; font-size: 1rem; background-color: #4c6ef5; color: white; border: none; border-radius: 8px; cursor: pointer; }
    button:hover { background-color: #3b5bdb; }
    .result { margin-top: 2rem; padding: 1rem; background-color: #e7f5ff; border-left: 5px solid #228be6; display: none; border-radius: 8px; }
    .history { margin-top: 1rem; }
    .history-item { font-size: 0.9rem; margin-bottom: 0.3rem; }
    #routineChoice { text-align: center; margin-top: 1rem; display: none; }
    #routineOutput { margin-top: 1rem; background-color: #e7f5ff; border-left: 5px solid #228be6; padding: 1rem; border-radius: 8px; display: none; }
    .choice-btn { margin: 0 0.5rem; padding: 0.5rem 1rem; font-size: 0.9rem; background-color: #4c6ef5; color: white; border: none; border-radius: 6px; cursor: pointer; }
    .choice-btn:hover { background-color: #3b5bdb; }
  </style>
</head>
<body>
  <header><strong>&lt;자아효능감 검사&gt;</strong></header>
  <div class="definition">자아효능감이란, 자신이 어떤 일을 성공적으로 해낼 수 있다는 믿음을 말합니다.</div>
  <div class="container">
    <form id="efficacyForm">

      <div class="question">
        <h3>1. 예상치 못한 어려움이 닥쳐도 잘 해결할 자신이 있다.</h3>
        <div class="options">
          <label><input type="radio" name="q1" value="1"> 전혀 아니다</label>
          <label><input type="radio" name="q1" value="2"> 그렇지 않다</label>
          <label><input type="radio" name="q1" value="3"> 어느 정도 그렇다</label>
          <label><input type="radio" name="q1" value="4"> 매우 그렇다</label>
        </div>
      </div>
    
      <div class="question">
        <h3>2. 어떤 일이든 열심히 하면 결국 해낼 수 있다.</h3>
        <div class="options">
          <label><input type="radio" name="q2" value="1"> 전혀 아니다</label>
          <label><input type="radio" name="q2" value="2"> 그렇지 않다</label>
          <label><input type="radio" name="q2" value="3"> 어느 정도 그렇다</label>
          <label><input type="radio" name="q2" value="4"> 매우 그렇다</label>
        </div>
      </div>
    
      <div class="question">
        <h3>3. 새로운 일도 자신 있게 도전할 수 있다.</h3>
        <div class="options">
          <label><input type="radio" name="q3" value="1"> 전혀 아니다</label>
          <label><input type="radio" name="q3" value="2"> 그렇지 않다</label>
          <label><input type="radio" name="q3" value="3"> 어느 정도 그렇다</label>
          <label><input type="radio" name="q3" value="4"> 매우 그렇다</label>
        </div>
      </div>
    
      <div class="question">
        <h3>4. 문제가 생겨도 방법을 찾아낼 수 있다고 믿는다.</h3>
        <div class="options">
          <label><input type="radio" name="q4" value="1"> 전혀 아니다</label>
          <label><input type="radio" name="q4" value="2"> 그렇지 않다</label>
          <label><input type="radio" name="q4" value="3"> 어느 정도 그렇다</label>
          <label><input type="radio" name="q4" value="4"> 매우 그렇다</label>
        </div>
      </div>
    
      <div class="question">
        <h3>5. 힘든 상황에서도 내 능력을 의심하지 않는다.</h3>
        <div class="options">
          <label><input type="radio" name="q5" value="1"> 전혀 아니다</label>
          <label><input type="radio" name="q5" value="2"> 그렇지 않다</label>
          <label><input type="radio" name="q5" value="3"> 어느 정도 그렇다</label>
          <label><input type="radio" name="q5" value="4"> 매우 그렇다</label>
        </div>
      </div>
    
      <div class="question">
        <h3>6. 나는 스스로에게 꽤 유능하다고 느낀다.</h3>
        <div class="options">
          <label><input type="radio" name="q6" value="1"> 전혀 아니다</label>
          <label><input type="radio" name="q6" value="2"> 그렇지 않다</label>
          <label><input type="radio" name="q6" value="3"> 어느 정도 그렇다</label>
          <label><input type="radio" name="q6" value="4"> 매우 그렇다</label>
        </div>
      </div>
    
      <div class="question">
        <h3>7. 주변의 평가보다 내 판단을 더 믿는 편이다.</h3>
        <div class="options">
          <label><input type="radio" name="q7" value="1"> 전혀 아니다</label>
          <label><input type="radio" name="q7" value="2"> 그렇지 않다</label>
          <label><input type="radio" name="q7" value="3"> 어느 정도 그렇다</label>
          <label><input type="radio" name="q7" value="4"> 매우 그렇다</label>
        </div>
      </div>
    
      <div class="question">
        <h3>8. 해야 할 일을 계획하고 실행하는 데 자신 있다.</h3>
        <div class="options">
          <label><input type="radio" name="q8" value="1"> 전혀 아니다</label>
          <label><input type="radio" name="q8" value="2"> 그렇지 않다</label>
          <label><input type="radio" name="q8" value="3"> 어느 정도 그렇다</label>
          <label><input type="radio" name="q8" value="4"> 매우 그렇다</label>
        </div>
      </div>
    
      <div class="question">
        <h3>9. 실패하더라도 다시 시도할 수 있다.</h3>
        <div class="options">
          <label><input type="radio" name="q9" value="1"> 전혀 아니다</label>
          <label><input type="radio" name="q9" value="2"> 그렇지 않다</label>
          <label><input type="radio" name="q9" value="3"> 어느 정도 그렇다</label>
          <label><input type="radio" name="q9" value="4"> 매우 그렇다</label>
        </div>
      </div>
    
      <div class="question">
        <h3>10. 나에게 주어진 일을 끝까지 해낼 수 있다.</h3>
        <div class="options">
          <label><input type="radio" name="q10" value="1"> 전혀 아니다</label>
          <label><input type="radio" name="q10" value="2"> 그렇지 않다</label>
          <label><input type="radio" name="q10" value="3"> 어느 정도 그렇다</label>
          <label><input type="radio" name="q10" value="4"> 매우 그렇다</label>
        </div>
      </div>
    
      <button type="submit">결과 보기</button>
    </form>
    <div class="result" id="resultBox"></div>
    <div id="routineChoice">
      <p><strong>이 결과에 따른 루틴을 설정할까요?</strong></p>
      <button class="choice-btn" id="yesRoutine">예</button>
      <button class="choice-btn" id="noRoutine">아니요</button>
    </div>
    <div id="routineOutput"></div>
  </div>
  <script>
    function getEfficacyLevel(score) {
      if (score <= 20) return '낮음';
      if (score <= 30) return '보통';
      return '높음';
    }

    function showRoutine(score) {
      let level = getEfficacyLevel(score);
      let routines = [];
      if (level === '낮음') {
        routines = ['매일 아침 5분 작은 목표 설정', '작은 성공 경험 일기 작성', '5분 짧은 도전하기'];
      } else if (level === '보통') {
        routines = ['주간 목표 달성 체크리스트 작성', '진행 상황 시각적 피드백 활용', '주기적 자기 동기 부여 문구 설정'];
      } else {
        routines = ['멘토링 세션 진행', '리더십 과제 수행', '자기 통제력 향상 훈련'];
      }
      const out = document.getElementById('routineOutput');
      out.innerHTML = '<strong>추천 루틴 (' + level + ' 수준 기준):</strong><ul>' + routines.map(r => '<li>' + r + '</li>').join('') + '</ul><p>당신의 성장을 응원합니다!</p>';
      out.style.display = 'block';
    }

    function showEncouragement() {
      const out = document.getElementById('routineOutput');
      out.innerHTML = '<p>결정을 존중합니다. 언제든 시작할 준비가 되면 돌아와주세요!</p>';
      out.style.display = 'block';
    }

    document.getElementById('efficacyForm').addEventListener('submit', function(e) {
      e.preventDefault();
      let total = 0, count = 0;
      for (let i = 1; i <= 10; i++) {
        const sel = document.querySelector('input[name="q' + i + '"]:checked');
        if (sel) { total += parseInt(sel.value); count++; }
      }
      if (count < 10) { alert('모든 문항에 답해주세요.'); return; }

      // Save record
      let records = JSON.parse(localStorage.getItem('efficacyRecords') || '[]');
      records.push({ date: new Date().toLocaleString(), score: total });
      localStorage.setItem('efficacyRecords', JSON.stringify(records));

      // Calculate stats
      let sum = records.reduce((acc, r) => acc + r.score, 0);
      let avg = (sum / records.length).toFixed(2);
      let lowCount = records.filter(r => r.score <= 20).length;
      let midCount = records.filter(r => r.score > 20 && r.score <= 30).length;
      let highCount = records.filter(r => r.score > 30).length;

      // Display result
      const resultBox = document.getElementById('resultBox');
      resultBox.innerHTML = '<strong>총점: ' + total + '점</strong><br>' +
                            '<strong>자아효능감 수준: ' + getEfficacyLevel(total) + '</strong><br>' +
                            '<p>전체 횟수: ' + records.length + '회, 평균 점수: ' + avg + '점</p>' +
                            '<p>낮음: ' + lowCount + '회 (' + ((lowCount/records.length)*100).toFixed(1) + '%), 보통: ' + midCount + '회 (' + ((midCount/records.length)*100).toFixed(1) + '%), 높음: ' + highCount + '회 (' + ((highCount/records.length)*100).toFixed(1) + '%)</p>';
      resultBox.style.display = 'block';
      document.getElementById('routineChoice').style.display = 'block';

      // Attach choice handlers
      document.getElementById('yesRoutine').onclick = function() { showRoutine(total); };
      document.getElementById('noRoutine').onclick = function() { showEncouragement(); };
    });
  </script>
</body>
</html>
